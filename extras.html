<!DOCTYPE html>
<html>
    <head>
        <title>s, r, c. | Extras</title>
        <link rel="icon" href="/stuff/toro.png">
        <link rel="stylesheet" href="/stuff/css/styles.css">
        <link rel="stylesheet" href="/stuff/css/alert.css">
        <script src="/stuff/js/loading.js"></script>
        <script src="/stuff/js/settings.js"></script>
        <script src="/stuff/js/moresettings.js"></script>
        <script src="/stuff/js/alert.js"></script>
        <script src="/stuff/js/messages.js"></script>
        <link rel="icon" href="/stuff/logo.png">
        <meta property="og:title" content="solos games?">
        <meta name="theme-color" content="#00ffa6">
        <meta name="msapplication-TileColor" content="#00ffa6">
        <meta property="og:image" content="/stuff/toro.png">
        <meta name="description" content="one of the best game sites out there!">
        <meta property="og:description" content="one of the best game sites out there!">
    </head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JMXEZ1F6QH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JMXEZ1F6QH');
</script>
    <body>
        <div id="loading-screen">
            <div class="spinner">
                <div></div>   
                <div></div>    
                <div></div>    
                <div></div>    
              </div>
              <br>
              <br>
              <br>              
            <h1 id="messageforyou"></h1>
            <div id="dabottom" style="display: none">
                <h1><a onclick="loadthething()">skip ts loading</a></h1>
            </div>
        </div>
        <div id="header">
            <img class="headericons" style="transform: scale(1.3);" src="/stuff/logo.png" onclick="window.location.href='/';">
            <div class="right">
                <img class="headericons" src="/stuff/icons/gamepad-solid.svg" onclick="window.location.href='/math.html/';">
                <img class="headericons" src="/stuff/icons/border-all-solid.svg" onclick="window.location.href='/reading.html/';">
                <img class="headericons" src="/stuff/icons/handshake-solid.svg" onclick="window.location.href='/partners.html';">
                <img class="headericons" src="/stuff/icons/plus-solid.svg" onclick="window.location.href='/extras.html';">
            </div>
        </div>
        <div class="message-box" id="messageBox"></div>
        <div id="roddyricchboxhome">
            <h1>extras</h1>
            <br>
            <button>credits</button>
            <button>game submissions</button>
            <br>
        </div>
        <div id="footer">
            <p id="online">online users:</p>
            <div class="right">
                <img class="headericons" src="/stuff/icons/settings.png" onclick="window.location.href='/settings.html';">
                <img class="headericons" id="userpfp" src="/stuff/icons/toro/png" onclick="window.location.href='/profile/';">
            </div>
        </div>
        <div id="lowtaperfade"></div>
        <div id="particles-js"></div>
        <script src="/particles.js"></script>
        <script src="/app.js"></script>
        <script src="/frog/bundle.js" defer></script>
        <script src="/frog/config.js?cdn" defer></script>
        <script>
          const form = document.querySelector("#uv-form");
          const input = document.querySelector("#uv-address");
          console.log(form)
          console.log(input)
          document.addEventListener("DOMContentLoaded", function () {
          form.addEventListener("submit", async (event) => {
          console.log('hi')
          event.preventDefault();
          window.navigator.serviceWorker
          .register("/frog/sw.js", {
            scope: __uv$config.prefix,
          })
          .then(() => {
            let url = input.value.trim();
            if (!isUrl(url)) url = "https://duckduckgo.com/?t=h_&ia=web&q=" + url;
            else if (!(url.startsWith("https://") || url.startsWith("http://")))
              url = "http://" + url;
            if (url === "http://now.gg") {
          alert('you are going to a broken site! redirecting you to https://nowgg.lol/hub')
          url = "https://nowgg.lol/hub"
        }
          else if (url === "http://now.gg/") {
            alert('you are going to a broken site! redirecting you to https://nowgg.lol/hub')
            url = "https://nowgg.lol/hub"
        }
          else if (url === "https://now.gg") {
            alert('you are going to a broken site! redirecting you to https://nowgg.lol/hub')
            url = "https://nowgg.lol/hub"
        }
          else if (url === "https://now.gg/") {
            alert('you are going to a broken site! redirecting you to https://nowgg.lol/hub')
            url = "https://nowgg.lol/hub"
        }
            sessionStorage.setItem("encodedUrl", __uv$config.encodeUrl(url));
            location.href = "calculus";
          });
      });
    });
    
    function isUrl(val = "") {
      if (
        /^http(s?):\/\//.test(val) ||
        (val.includes(".") && val.slice(0, 1) !== " ")
      )
        return true;
      return false;
    }
    function getprotocol(){
    if (window.location.protocol === 'http:'){
        return 'ws://'
    }
    else{
        return 'wss://'
    }
}
let socket
function connectWebSocket() {
    socket = new WebSocket(getprotocol() + window.location.host + '/api/onlineusers');

    socket.onmessage = (event) => {
    const data = JSON.parse(event.data);
    document.getElementById("online").innerText = `online users: ${data.users}`;
};

socket.onclose = () => {
    console.warn(`attempting to get online users...`, event);
    setTimeout(connectWebSocket, 5000);
    document.getElementById("online").innerText = "online users: ?";
};

socket.onerror = function(error) {
        console.error(`WebSocket error:`, error);
        webSocket.close();
    };
}
connectWebSocket();
function loadthething(){
    const loadingScreen = document.getElementById('loading-screen');
            setTimeout(function() {
                loadingScreen.classList.add('fade-out');
                setTimeout(function() {
                    document.body.classList.remove('loading');
                }, 100);
            }, 100);
        }
        </script>    
    </body>
</html>
